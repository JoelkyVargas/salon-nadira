{# templates/admin/citas/appointment_calendar.html #}
{% extends "admin/base_site.html" %}
{% load static %}

{% block extrastyle %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'admin/custom.css' %}">
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.css" rel="stylesheet">
  <style>
    .calendar-wrap { background:#fff; border-radius:12px; padding:16px; box-shadow:0 8px 22px rgba(0,0,0,0.06); }
    .object-tools { float:right; margin-bottom:10px; }
  </style>
{% endblock %}

{% block content %}
  <div class="object-tools">
    <ul>
      <li><a class="button" href="{{ changelist_url }}">Ver lista</a></li>
    </ul>
  </div>

  <h1>Calendario de Citas</h1>
  <div class="calendar-wrap"><div id="calendar"></div></div>
{% endblock %}

{% block extrahead %}
  {{ block.super }}
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>
{% endblock %}

{% block footer %}
  {{ block.super }}
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var el = document.getElementById('calendar');
      var calendar = new FullCalendar.Calendar(el, {
        initialView: 'timeGridWeek',
        locale: 'es',
        height: 'auto',
        headerToolbar: { left: 'prev,next today', center: 'title', right: 'dayGridMonth,timeGridWeek,timeGridDay' },
        buttonText: { today:'Hoy', month:'Mes', week:'Semana', day:'DÃ­a' },
        events: '/api/appointments/',
        slotMinTime: '08:00:00',
        slotMaxTime: '20:00:00',
        nowIndicator: true
      });
      calendar.render();
    });
  </script>
{% endblock %}
